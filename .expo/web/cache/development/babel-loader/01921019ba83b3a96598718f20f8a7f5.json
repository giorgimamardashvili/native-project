{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject, _templateObject2, _templateObject3;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport axios from \"axios\";\nimport styled from \"styled-components/native\";\nimport { logPerson } from \"../redux/reducers/auth\";\nimport { useDispatch } from \"react-redux\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Auth = function Auth() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLogged = _useState6[0],\n      setIsLogged = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      error = _useState8[0],\n      setError = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      errorUsername = _useState10[0],\n      setErrorUsername = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      errorPassword = _useState12[0],\n      setErrorPassword = _useState12[1];\n\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      hidePass = _useState14[0],\n      setHidePass = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      isLoading = _useState16[0],\n      setIsLoading = _useState16[1];\n\n  var navigation = useNavigation();\n  var dispatch = useDispatch();\n\n  var storeToken = function storeToken(value) {\n    return _regeneratorRuntime.async(function storeToken$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"token\", JSON.stringify(value)));\n\n          case 3:\n            setIsLoading(false);\n            setUsername(\"\");\n            setPassword(\"\");\n            _context.next = 10;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n\n  var formValidate = function formValidate() {\n    username == \"\" ? setErrorUsername(\"ველის შევსება აუცილებელია\") : setErrorUsername(\"\");\n    password == \"\" ? setErrorPassword(\"ველის შევსება აუცილებელია\") : setErrorPassword(\"\");\n  };\n\n  var Login = function Login(username, password) {\n    var response, token;\n    return _regeneratorRuntime.async(function Login$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setError(\"\");\n            formValidate();\n            setIsLoading(true);\n            _context2.prev = 3;\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(axios.post(\"https://cms.vendoo.ge/api/customer/login\", {\n              username: username,\n              password: password\n            }, {\n              headers: {\n                accept: \"application/json\",\n                \"content-type\": \"application/json\"\n              }\n            }));\n\n          case 6:\n            response = _context2.sent;\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem(\"token\"));\n\n          case 9:\n            token = response.data.token;\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(storeToken(token));\n\n          case 12:\n            setIsLogged(function () {\n              return true;\n            });\n            dispatch(logPerson(true));\n            isLogged ? navigation.navigate(\"მთავარი\") : \"\";\n            _context2.next = 24;\n            break;\n\n          case 17:\n            _context2.prev = 17;\n            _context2.t0 = _context2[\"catch\"](3);\n            setError(\"\");\n            console.log(_context2.t0);\n            _context2.t0.response.status == 422 ? setError(\"შეყვანილი ინფორმაცია არასწორია\") : setError(\"\");\n            _context2.t0.response.status == 500 ? setError(_context2.t0.response.data.message) : setError(\"\");\n            setIsLoading(false);\n\n          case 24:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[3, 17]], Promise);\n  };\n\n  var checkToken = function checkToken() {\n    var value;\n    return _regeneratorRuntime.async(function checkToken$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));\n\n          case 3:\n            value = _context3.sent;\n\n            if (value !== null) {\n              setIsLogged(true);\n              dispatch(logPerson(true));\n            }\n\n            _context3.next = 9;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var usernameValidate = function usernameValidate(username) {\n    var reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w\\w+)+$/;\n\n    if (reg.test(username) === false) {\n      setUsername(username);\n      return false;\n    } else {\n      setUsername(username);\n    }\n  };\n\n  var LogOut = function LogOut() {\n    return _regeneratorRuntime.async(function LogOut$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem(\"token\"));\n\n          case 2:\n            setIsLogged(false);\n            dispatch(logPerson(false));\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(checkToken());\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n\n  var logInfo = function logInfo() {\n    if (!isLogged) {\n      return _jsxs(_Fragment, {\n        children: [_jsx(Error, {\n          children: error\n        }), _jsx(Input, {\n          type: \"text\",\n          value: username,\n          placeholder: \"\\u10D4\\u10DA.\\u10E4\\u10DD\\u10E1\\u10E2\\u10D0 \\u10D0\\u10DC \\u10DB\\u10DD\\u10D1\\u10D8\\u10DA\\u10E3\\u10E0\\u10D8\",\n          onChangeText: function onChangeText(e) {\n            return usernameValidate(e);\n          }\n        }), _jsx(Error, {\n          children: errorUsername\n        }), _jsx(Password, {\n          children: _jsx(Input, {\n            autoCompleteType: \"password\",\n            secureTextEntry: hidePass ? true : false,\n            placeholder: \"\\u10DE\\u10D0\\u10E0\\u10DD\\u10DA\\u10D8\",\n            value: password,\n            onChangeText: function onChangeText(e) {\n              return setPassword(e);\n            }\n          })\n        }), _jsx(Error, {\n          children: errorPassword\n        }), _jsx(Button, {\n          title: \"\\u10D0\\u10D5\\u10E2\\u10DD\\u10E0\\u10D8\\u10D6\\u10D0\\u10EA\\u10D8\\u10D0\",\n          color: \"tomato\",\n          disabled: !username || !password,\n          onPress: function onPress() {\n            return Login(username, password);\n          }\n        }), isLoading && _jsx(ActivityIndicator, {\n          size: \"large\",\n          color: \"#00ff00\"\n        })]\n      });\n    } else {\n      return _jsx(Button, {\n        title: \"\\u10D2\\u10D0\\u10E1\\u10D5\\u10DA\\u10D0\",\n        color: \"tomato\",\n        onPress: function onPress() {\n          return LogOut();\n        }\n      });\n    }\n  };\n\n  return _jsx(View, {\n    style: {\n      margin: 20,\n      marginTop: 100\n    },\n    children: logInfo()\n  });\n};\n\nexport default Auth;\nvar Input = styled.TextInput(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n  font-size: 18px;\\n  border-width: 2px;\\n  border-color: #d5d5d5;\\n  margin: 2px;\\n  width: 95%;\\n\"])));\nvar Password = styled.View(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n  flex-direction: row;\\n  align-items: center;\\n\"])));\nvar Error = styled.Text(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"\\n  color: red;\\n  font-size: 16px;\\n  margin-bottom: 5px;\\n\"])));","map":{"version":3,"sources":["C:/Users/overlord/Desktop/Work/native-project/src/pages/Auth.jsx"],"names":["React","useEffect","useState","AsyncStorage","useNavigation","axios","styled","logPerson","useDispatch","Auth","username","setUsername","password","setPassword","isLogged","setIsLogged","error","setError","errorUsername","setErrorUsername","errorPassword","setErrorPassword","hidePass","setHidePass","isLoading","setIsLoading","navigation","dispatch","storeToken","value","setItem","JSON","stringify","formValidate","Login","post","headers","accept","response","removeItem","token","data","navigate","console","log","status","message","checkToken","getItem","usernameValidate","reg","test","LogOut","logInfo","e","margin","marginTop","Input","TextInput","Password","View","Error","Text"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Text, TextInput, View, Button, ActivityIndicator } from \"react-native\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport axios from \"axios\";\r\nimport styled from \"styled-components/native\";\r\nimport { logPerson } from \"../redux/reducers/auth\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst Auth = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isLogged, setIsLogged] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [errorUsername, setErrorUsername] = useState(\"\");\r\n  const [errorPassword, setErrorPassword] = useState(\"\");\r\n  const [hidePass, setHidePass] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const navigation = useNavigation();\r\n  const dispatch = useDispatch();\r\n\r\n  const storeToken = async (value) => {\r\n    try {\r\n      await AsyncStorage.setItem(\"token\", JSON.stringify(value));\r\n      setIsLoading(false);\r\n      setUsername(\"\");\r\n      setPassword(\"\");\r\n    } catch (e) {}\r\n  };\r\n\r\n  const formValidate = () => {\r\n    username == \"\"\r\n      ? setErrorUsername(\"ველის შევსება აუცილებელია\")\r\n      : setErrorUsername(\"\");\r\n    password == \"\"\r\n      ? setErrorPassword(\"ველის შევსება აუცილებელია\")\r\n      : setErrorPassword(\"\");\r\n  };\r\n\r\n  const Login = async (username, password) => {\r\n    setError(\"\");\r\n    formValidate();\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await axios.post(\r\n        `https://cms.vendoo.ge/api/customer/login`,\r\n        { username: username, password: password },\r\n        {\r\n          headers: {\r\n            accept: \"application/json\",\r\n            \"content-type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n      await AsyncStorage.removeItem(\"token\");\r\n      const token = response.data.token;\r\n      await storeToken(token);\r\n      setIsLogged(() => true);\r\n      dispatch(logPerson(true));\r\n      isLogged ? navigation.navigate(\"მთავარი\") : \"\";\r\n    } catch (e) {\r\n      setError(\"\");\r\n      console.log(e);\r\n      e.response.status == 422\r\n        ? setError(\"შეყვანილი ინფორმაცია არასწორია\")\r\n        : setError(\"\");\r\n      e.response.status == 500\r\n        ? setError(e.response.data.message)\r\n        : setError(\"\");\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkToken = async () => {\r\n    try {\r\n      const value = await AsyncStorage.getItem(\"token\");\r\n      if (value !== null) {\r\n        setIsLogged(true);\r\n        dispatch(logPerson(true));\r\n      }\r\n    } catch (e) {}\r\n  };\r\n\r\n  const usernameValidate = (username) => {\r\n    let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w\\w+)+$/;\r\n    if (reg.test(username) === false) {\r\n      setUsername(username);\r\n      return false;\r\n    } else {\r\n      setUsername(username);\r\n    }\r\n  };\r\n  const LogOut = async () => {\r\n    await AsyncStorage.removeItem(\"token\");\r\n    setIsLogged(false);\r\n    dispatch(logPerson(false));\r\n  };\r\n\r\n  useEffect(async () => {\r\n    await checkToken();\r\n  }, []);\r\n\r\n  const logInfo = () => {\r\n    if (!isLogged) {\r\n      return (\r\n        <>\r\n          <Error>{error}</Error>\r\n          <Input\r\n            type=\"text\"\r\n            value={username}\r\n            placeholder=\"ელ.ფოსტა ან მობილური\"\r\n            onChangeText={(e) => usernameValidate(e)}\r\n          />\r\n          <Error>{errorUsername}</Error>\r\n          <Password>\r\n            <Input\r\n              autoCompleteType=\"password\"\r\n              secureTextEntry={hidePass ? true : false}\r\n              placeholder=\"პაროლი\"\r\n              value={password}\r\n              onChangeText={(e) => setPassword(e)}\r\n            />\r\n          </Password>\r\n          <Error>{errorPassword}</Error>\r\n          <Button\r\n            title=\"ავტორიზაცია\"\r\n            color=\"tomato\"\r\n            disabled={!username || !password}\r\n            onPress={() => Login(username, password)}\r\n          />\r\n          {isLoading && <ActivityIndicator size=\"large\" color=\"#00ff00\" />}\r\n        </>\r\n      );\r\n    } else {\r\n      return <Button title=\"გასვლა\" color=\"tomato\" onPress={() => LogOut()} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        margin: 20,\r\n        marginTop: 100,\r\n      }}\r\n    >\r\n      {logInfo()}\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n\r\nconst Input = styled.TextInput`\r\n  font-size: 18px;\r\n  border-width: 2px;\r\n  border-color: #d5d5d5;\r\n  margin: 2px;\r\n  width: 95%;\r\n`;\r\nconst Password = styled.View`\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\nconst Error = styled.Text`\r\n  color: red;\r\n  font-size: 16px;\r\n  margin-bottom: 5px;\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}